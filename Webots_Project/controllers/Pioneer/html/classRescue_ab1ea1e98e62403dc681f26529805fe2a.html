<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Robot Pioneer: Rescue::yellowLine</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Robot Pioneer
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generado por Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Buscar');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Buscar');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classRescue_ab1ea1e98e62403dc681f26529805fe2a.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="contents">
<a id="ab1ea1e98e62403dc681f26529805fe2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1ea1e98e62403dc681f26529805fe2a">&#9670;&nbsp;</a></span>yellowLine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Rescue::yellowLine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Esta función es usada principalmente en Go, su función principal es la busqueda de la linea amarilla que indica que es la salida del mapa. </p>
<p>Esta función utiliza los metodos de la cámara esférica para analizar la imagen pixel por pixel en busca del nivel de amarillo concreto para considerarlo linea de llegada. Utiliza un contador y rangos para verificar que esa linea es la correcta. </p><div class="fragment"><div class="line"><span class="keywordflow">while</span>(<a class="code" href="classRescue_ab1ea1e98e62403dc681f26529805fe2a.html#ab1ea1e98e62403dc681f26529805fe2a">yellowLine</a>==<span class="keyword">false</span>){<span class="comment">//El robot andará hacia delante hasta que encuentre una linea amarilla</span></div><div class="line">    <a class="code" href="classRescue_a70a5e292c84029568ff6c0de2f2d9f43.html#a70a5e292c84029568ff6c0de2f2d9f43">_mode</a>=<a class="code" href="classRescue_ab44ced9ce57b1b0d19b5456cd952d702.html#ab44ced9ce57b1b0d19b5456cd952d702ac5b8fd2a28d3d22c89095ccb90ea6e2a">FORWARD</a>;</div><div class="line">    <a class="code" href="classRescue_aeef91de334e7779ce2fb2c2b57cd70c3.html#aeef91de334e7779ce2fb2c2b57cd70c3">controlLine</a>();</div><div class="line">}</div></div><!-- fragment --> 
<p class="definition">Definición en la línea <a class="el" href="Rescue_8cpp_source.html#l00112">112</a> del archivo <a class="el" href="Rescue_8cpp_source.html">Rescue.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                       {</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    vector&lt;float&gt;HVS;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">//Tamaño de la imagen</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordtype">int</span> image_width_s = <a class="code" href="classRescue_a6f2788baf7717274fc75241b989796bc.html#a6f2788baf7717274fc75241b989796bc">_spherical_camera</a>-&gt;getWidth();</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordtype">int</span> image_height_s = <a class="code" href="classRescue_a6f2788baf7717274fc75241b989796bc.html#a6f2788baf7717274fc75241b989796bc">_spherical_camera</a>-&gt;getHeight();</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="classRescue_a9a95f0cd95b72a89f87c6e9b19d71f73.html#a9a95f0cd95b72a89f87c6e9b19d71f73">sum_y</a>=0;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *image_s = <a class="code" href="classRescue_a6f2788baf7717274fc75241b989796bc.html#a6f2788baf7717274fc75241b989796bc">_spherical_camera</a>-&gt;getImage();</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; image_width_s; x++) {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = image_height_s/2; y &lt; image_height_s; y++) {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <a class="code" href="classRescue_a5ec72c1115b4a89bd6079f74866b4717.html#a5ec72c1115b4a89bd6079f74866b4717">green</a> = <a class="code" href="classRescue_a6f2788baf7717274fc75241b989796bc.html#a6f2788baf7717274fc75241b989796bc">_spherical_camera</a>-&gt;imageGetGreen(image_s, image_width_s, x, y);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <a class="code" href="classRescue_af9ba54390762489e7f5c13ea8623b745.html#af9ba54390762489e7f5c13ea8623b745">red</a> = <a class="code" href="classRescue_a6f2788baf7717274fc75241b989796bc.html#a6f2788baf7717274fc75241b989796bc">_spherical_camera</a>-&gt;imageGetRed(image_s, image_width_s, x, y);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <a class="code" href="classRescue_adeb74390f710b4a180605f4a68e1bc77.html#adeb74390f710b4a180605f4a68e1bc77">blue</a> = <a class="code" href="classRescue_a6f2788baf7717274fc75241b989796bc.html#a6f2788baf7717274fc75241b989796bc">_spherical_camera</a>-&gt;imageGetBlue(image_s, image_width_s, x, y);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            </div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="comment">//Pasas los resultados a HSV y se comprueba que se encuentra en el rango de colores</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            HVS=<a class="code" href="classRescue_af2ba5b73069e7407f1bfc857a1ddae9c.html#af2ba5b73069e7407f1bfc857a1ddae9c">RGB2HSV</a>(<a class="code" href="classRescue_af9ba54390762489e7f5c13ea8623b745.html#af9ba54390762489e7f5c13ea8623b745">red</a>,<a class="code" href="classRescue_a5ec72c1115b4a89bd6079f74866b4717.html#a5ec72c1115b4a89bd6079f74866b4717">green</a>,<a class="code" href="classRescue_adeb74390f710b4a180605f4a68e1bc77.html#adeb74390f710b4a180605f4a68e1bc77">blue</a>);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keywordtype">bool</span> SPACEH=HVS[0]==240;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <span class="keywordtype">bool</span> SPACES=(HVS[2]&gt;0.8558 &amp;&amp; HVS[2]&lt;=1);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keywordtype">bool</span> SPACEV=HVS[1]&gt;80 &amp;&amp; HVS[1]&lt;155;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="comment">//Cumple las condiciones    </span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <span class="keywordtype">bool</span> YELLOW=SPACEH==<span class="keyword">true</span> &amp;&amp; SPACES==<span class="keyword">true</span> &amp;&amp; SPACEV==<span class="keyword">true</span>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                </div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            <span class="keywordflow">if</span> (YELLOW) <a class="code" href="classRescue_a9a95f0cd95b72a89f87c6e9b19d71f73.html#a9a95f0cd95b72a89f87c6e9b19d71f73">sum_y</a>++;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;         }</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;     }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;     <a class="code" href="classRescue_ad0101336342f1b5e9753b692d0d8b484.html#ad0101336342f1b5e9753b692d0d8b484">percentage_yellow</a> = (<a class="code" href="classRescue_a9a95f0cd95b72a89f87c6e9b19d71f73.html#a9a95f0cd95b72a89f87c6e9b19d71f73">sum_y</a> / (float) (image_width_s * image_height_s/2)) * 100;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;     </div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;     <span class="comment">//Detecta si hay linea amarilla   </span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;     <span class="keywordflow">if</span>(<a class="code" href="classRescue_ad0101336342f1b5e9753b692d0d8b484.html#ad0101336342f1b5e9753b692d0d8b484">percentage_yellow</a>&gt;0.5){</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;       <a class="code" href="classRescue_a180e2955648c5bae24069da9db0c1a5f.html#a180e2955648c5bae24069da9db0c1a5f">color_counter</a>++;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;       cout&lt;&lt;<span class="stringliteral">&quot;Linea amarilla&quot;</span>&lt;&lt;endl;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;     }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;     <span class="comment">//En ciertos mapas necesita un valor minimo de detección llamado color_counter   </span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;     <span class="keywordflow">if</span>( <a class="code" href="classRescue_a180e2955648c5bae24069da9db0c1a5f.html#a180e2955648c5bae24069da9db0c1a5f">color_counter</a>&gt;=12) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        </div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;     <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div><div class="ttc" id="classRescue_af2ba5b73069e7407f1bfc857a1ddae9c_html_af2ba5b73069e7407f1bfc857a1ddae9c"><div class="ttname"><a href="classRescue_af2ba5b73069e7407f1bfc857a1ddae9c.html#af2ba5b73069e7407f1bfc857a1ddae9c">Rescue::RGB2HSV</a></div><div class="ttdeci">vector&lt; float &gt; RGB2HSV(unsigned char red, unsigned char green, unsigned char blue)</div><div class="ttdoc">Convierte el espacio de colores RGB a HSV para un reconocimiento mejor de colores. </div><div class="ttdef"><b>Definition:</b> <a href="Rescue_8cpp_source.html#l00431">Rescue.cpp:431</a></div></div>
<div class="ttc" id="classRescue_adeb74390f710b4a180605f4a68e1bc77_html_adeb74390f710b4a180605f4a68e1bc77"><div class="ttname"><a href="classRescue_adeb74390f710b4a180605f4a68e1bc77.html#adeb74390f710b4a180605f4a68e1bc77">Rescue::blue</a></div><div class="ttdeci">unsigned char blue</div><div class="ttdef"><b>Definition:</b> <a href="Rescue_8h_source.html#l00240">Rescue.h:240</a></div></div>
<div class="ttc" id="classRescue_af9ba54390762489e7f5c13ea8623b745_html_af9ba54390762489e7f5c13ea8623b745"><div class="ttname"><a href="classRescue_af9ba54390762489e7f5c13ea8623b745.html#af9ba54390762489e7f5c13ea8623b745">Rescue::red</a></div><div class="ttdeci">unsigned char red</div><div class="ttdef"><b>Definition:</b> <a href="Rescue_8h_source.html#l00240">Rescue.h:240</a></div></div>
<div class="ttc" id="classRescue_a5ec72c1115b4a89bd6079f74866b4717_html_a5ec72c1115b4a89bd6079f74866b4717"><div class="ttname"><a href="classRescue_a5ec72c1115b4a89bd6079f74866b4717.html#a5ec72c1115b4a89bd6079f74866b4717">Rescue::green</a></div><div class="ttdeci">unsigned char green</div><div class="ttdef"><b>Definition:</b> <a href="Rescue_8h_source.html#l00240">Rescue.h:240</a></div></div>
<div class="ttc" id="classRescue_a9a95f0cd95b72a89f87c6e9b19d71f73_html_a9a95f0cd95b72a89f87c6e9b19d71f73"><div class="ttname"><a href="classRescue_a9a95f0cd95b72a89f87c6e9b19d71f73.html#a9a95f0cd95b72a89f87c6e9b19d71f73">Rescue::sum_y</a></div><div class="ttdeci">int sum_y</div><div class="ttdoc">Contador de pixeles amarillos en la imagen. </div><div class="ttdef"><b>Definition:</b> <a href="Rescue_8h_source.html#l00244">Rescue.h:244</a></div></div>
<div class="ttc" id="classRescue_ad0101336342f1b5e9753b692d0d8b484_html_ad0101336342f1b5e9753b692d0d8b484"><div class="ttname"><a href="classRescue_ad0101336342f1b5e9753b692d0d8b484.html#ad0101336342f1b5e9753b692d0d8b484">Rescue::percentage_yellow</a></div><div class="ttdeci">double percentage_yellow</div><div class="ttdoc">Porcentage de amarillo en la imagen. </div><div class="ttdef"><b>Definition:</b> <a href="Rescue_8h_source.html#l00246">Rescue.h:246</a></div></div>
<div class="ttc" id="classRescue_a6f2788baf7717274fc75241b989796bc_html_a6f2788baf7717274fc75241b989796bc"><div class="ttname"><a href="classRescue_a6f2788baf7717274fc75241b989796bc.html#a6f2788baf7717274fc75241b989796bc">Rescue::_spherical_camera</a></div><div class="ttdeci">Camera * _spherical_camera</div><div class="ttdef"><b>Definition:</b> <a href="Rescue_8h_source.html#l00271">Rescue.h:271</a></div></div>
<div class="ttc" id="classRescue_a180e2955648c5bae24069da9db0c1a5f_html_a180e2955648c5bae24069da9db0c1a5f"><div class="ttname"><a href="classRescue_a180e2955648c5bae24069da9db0c1a5f.html#a180e2955648c5bae24069da9db0c1a5f">Rescue::color_counter</a></div><div class="ttdeci">int color_counter</div><div class="ttdoc">Contador de color para saltar de Go() a Search() </div><div class="ttdef"><b>Definition:</b> <a href="Rescue_8h_source.html#l00252">Rescue.h:252</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classRescue.html">Rescue</a></li>
    <li class="footer">Generado el Martes, 26 de Noviembre de 2019 20:59:19 para Robot Pioneer por
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
